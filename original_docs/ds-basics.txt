digitalSTROM Basic Concepts
digitalSTROM

Version: v1.6-branch*
May 4, 2020

*

Revision: ff543697703e905f561456fa13185c572560da1e

1

©2020 digitalSTROM AG. All rights reserved.
The digitalSTROM logo is a trademark of the digitalSTROM. Use of this logo for commercial purposes without
the prior written consent of digitalSTROM may constitute trademark infringement and unfair competition in
violation of international laws.
No licenses, express or implied, are granted with respect to any of the technology described in this document.
digitalSTROM retains all intellectual property rights associated with the technology described in this document.
This document is intended to assist developers to develop applications that use or integrate digitalSTROM
technologies.
Every effort has been made to ensure that the information in this document is accurate. digitalSTROM is not
responsible for typographical errors.
digitalSTROM AG
Building Technology Park Zürich
Brandstrasse 33
CH-8952 Schlieren
Switzerland
Even though digitalSTROM has reviewed this document, digitalSTROM MAKES NO WARRANTY OR
REPRESENTATION, EITHER EXPRESS OR IMPLIED, WITH RESPECT TO THIS DOCUMENT, ITS QUALITY,
ACCURACY, MERCHANTABILITY, OR FITNESS FOR A PARTICULAR PURPOSE. AS A RESULT THIS DOCUMENT
IS PROVIDED ”AS IS”, AND YOU, THE READER ARE ASSUMING THE ENTIRE RISK AS TO ITS QUALITY AND
ACCURACY.
IN NO EVENT WILL DIGITALSTROM BE LIABLE FOR DIRECT, INDIRECT, SPECIAL, INCIDENTAL OR
CONSEQUENTIAL DAMAGES RESULTING FROM ANY DEFECT OR INACCURACY IN THIS DOCUMENT, EVEN IF
ADVISED OF THE POSSIBILITY OF SUCH DAMAGES.
THE WARRANTY AND REMEDIES SET FORTH ABOVE ARE EXCLUSIVE AND IN LIEU OF ALL OTHERS, ORAL OR
WRITTEN, EXPRESS OR IMPLIED. NO DIGITALSTROM AGENT OR EMPLOYEE IS AUTHORIZED TO MAKE ANY
MODIFICATION, EXTENSION, OR ADDITION TO THIS WARRANTY.

Contents
1 Introduction
1.1 Introduction to the digitalSTROM basics . . . . . . . . . . . . . . . . . . . . . . . . . . . .
1.2 Organization of this document . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

7
7
7

2 Data Model
2.1 Logical Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
2.2 Physical Structure . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
2.3 Application Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

8
8
8
8

3 Structure Objects
10
3.1 Zone . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
3.2 Group . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
3.3 Device . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10
3.4 Area . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3.5 Cluster . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3.6 Circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3.7 IP Network . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
3.8 Identification . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11
4 Event Objects
13
4.1 Device Level . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
4.2 System Level . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
4.3 High Level . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
4.4 Information Flow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13
4.5 Operating Concept . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14
4.6 Distributed Intelligence . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15
5 Scenes, Activities and Presets
16
5.1 Function and group related scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
5.1.1 Basic Presets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16
5.1.2 Stepping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
5.1.3 Area scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
5.1.4 Local push button . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
5.1.5 Special scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
5.1.6 Temperature control scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17
5.2 Group independent scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.1 Deep Off . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.2 Standby . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.3 Zone Active . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.4 Auto Standby . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.5 Absent . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.6 Present . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.7 Sleeping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.8 Wakeup . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.9 Door Bell . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.10 Panic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18
5.2.11 Fire . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
5.2.12 Alarm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
5.2.13 Wind . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
5.2.14 Rain . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
5.2.15 Hail . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
5.2.16 Pollution . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
5.2.17 Burglary Alarm . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19
3

5.3 Local Priority . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

19

6 Actions
20
6.1 Scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.1.1 Calling a Scene . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.1.2 Undo a Scene . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.1.3 Store Current Value . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.1.4 Activate Local Priority . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.1.5 Set to Lowest Stepping Step . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.2 Programming Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
6.2.1 Programming Mode Start . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.2.2 Programming Mode Finish . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.3 Configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.3.1 Read and Write Device Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.4 Sensor Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.4.1 Read Device Sensor Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.4.2 Distribute Sensor Value . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.5 Miscellaneous . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.5.1 Device Identification (a.k.a. ”Blink”) . . . . . . . . . . . . . . . . . . . . . . . . . . 21
6.5.2 Directly Set Output Value . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 21
7 Function and group state machines

22

8 Communication Objects
23
8.1 Device Level Physical Layer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
8.1.1 Downstream . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
8.1.2 Upstream . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
8.1.3 Automatic Repeat Query (ARQ) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
8.1.4 Latency . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
8.1.5 Addressing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23
8.2 Device Level Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.2.1 Pushbutton . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.2.2 Binary Input Event . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.2.3 Status Event . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.2.4 Sensor Event Table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.2.5 Limits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.3 System level communication . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24
8.3.1 dS485 Protocol . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
8.3.2 dSM-API . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
8.3.3 dSS JSON . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
8.3.4 Limits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
9 Outputs
26
9.1 Output Channel Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
9.2 Application Group Defaults . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27
10 Pushbuttons
29
10.1 Input Processing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
10.1.1 Timing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
10.2 Low-Level-Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29
10.2.1 1-way device pushbutton . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30
10.2.2 1-way zone or area button . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
10.2.3 2-way device pushbutton . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31
10.2.4 2-way zone or area button . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32
10.3 System Interfaces . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33

4

10.3.1 Settings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
10.3.2 Event Limits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
10.3.3 Configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

33
33
34

11 Binary Inputs
35
11.1 Low-Level-Events . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
11.2 Input Types . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
11.3 System Behavior . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
11.4 Input Processing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37
12 Sensor Values
38
12.1 Device Sensors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38
12.2 Room Sensors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
12.3 Application Status Sensors . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
12.3.1 Room Temperature Control . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
12.3.2 Apartment Ventilation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
12.4 Powerline Specifics . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 40
13 Glossary
42
13.1 digitalSTROM-Device . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
13.2 digitalSTROM-Ready-Device . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
13.3 dSUID - dS Unique Identifier . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
13.4 dSID - SGTIN-96 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42
13.5 SGTIN-128 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
13.6 GID-96 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 43
13.7 Function-ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
13.8 Vendor-ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
13.9 Product-ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
13.10GTIN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44
14 Certification Rules

46

A Structure Reference
47
A.1 Circuit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
A.2 Zone . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
A.3 Cluster . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
A.4 Device . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47
B Scene Command Reference
48
B.1 Presets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 48
B.2 Stepping . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
B.3 Area scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49
B.4 Local pushbutton . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
B.5 Special scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50
B.6 Temperature control scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
B.7 Ventilation control scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51
B.8 Group independent scenes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53
C Device Parameters
54
C.1 Class 0 - Communication Specific Parameters . . . . . . . . . . . . . . . . . . . . . . . . 54
C.1.1 Local Programming Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
C.2 Class 1 - digitalSTROM-Device Specific Parameters . . . . . . . . . . . . . . . . . . . . . 54
C.2.1 Firmware Version . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
C.2.2 Serial Numer . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
C.2.3 Function ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
C.2.4 Vendor ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54
5

C.2.5 Product ID . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.2.6 Structure and adressing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.2.7 OEM/GTIN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.2.8 Sensor Equipment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.2.9 Binary Input Equipment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3 Class 3 - Function Specific Parameters . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.1 Output Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.2 Pushbutton Configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.3 Dimm Time . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.4 Flashing Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.5 LED Configuration . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.6 Local Pushbutton . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.7 Configuration Flags . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.3.8 OEM/GTIN . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.4 Class 6 - Sensor Event Table . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.5 Class 64 - Output status . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .
C.5.1 Current output status . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .

54
54
55
55
55
56
56
56
57
58
59
60
61
61
61
63
63

D Device Scene Table
64
D.1 Scene Value . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
D.2 Configuration Bits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 64
E Device Registration

65

6

1

Introduction

1.1

Introduction to the digitalSTROM basics

This document describes the basic system concepts of the digitalSTROM system. Intended audience
are Hardware and Software developers that want to create applications that interact with digitalSTROM
installations. Sample applications can be:
• Smartphone applications that control digitalSTROM installations
• Scripts running in the digitalSTROM server that extend the functionality of the system or interface
to cloud based services
• Integration of 3rd party hardware with digitalSTROM
The document assumes that the user has experience using the digitalSTROM components, either in
an installation or through a development kit. The document only covers the software aspects of the
digitalSTROM technology.
Information about planning, installation and usage can be found in the following link:
http://www.digitalstrom.com/Partner/Support/Infocenter/?.
1.2

Organization of this document

The information in this document is presented in the following chapters:
• “Structure Objects” describes the topology of an electrical installation from the digitalSTROM
point of view, see 3
• “Event Objects” presents the different layers where events occur in the system and their handling,
see 4
• “Scenes and Activities” introduces the set of commands available within the digitalSTROM system,
and describes their specific scopes, see 5
• “Communication Objects” details the basic communication concepts within a digitalSTROM installation, see 8
• “Actions” List the commands that are understood by all digitalSTROM enabled devices, see 6
• The glossary and appendixes provide detailed information about parts of the system, see 13
• “Certification rules” List the rules that all applications or devices have to comply to be “digitalSTROM ready”, see 14

7

2

Data Model

The digitalSTROM data model covers all components related to the digitalSTROM communication network in the smart home.
The logical structure in the smart home consists of Apartment and Zones, Applications, Areas and
Clusters.
The physical counter part is the Installation in a house or flat, and the power line Circuits and IP Infrastructure.
How users control and use their smart home is separated into Applications. Examples of Application
Types are:
• Room lights
• Shutters and awnings
• Door bell
• Fire alarm
The relations between applications and how devices shall behave in certain situations is called orchestration.
2.1

Logical Structure

The Apartment is the logical instance of a digitalSTROM installation. This includes all rooms and any
dS-Device.
A Zone is defined by users, mostly as a direct representation of a physical room in the building.
An Application Group is the combination of digitalSTROM Devices and Submodules grouped by an Application Type. For example room lights, shades and temperature control are such applications.
An Area is a subset of some Submodules of one Application Group. The behavior of the Submodules
which are part of an Area and the Group orchestration of this Room are not independent. Areas are only
supported for Application Types ”Room Lights” and ”Shades”.
A Cluster is a user defined logical set of Submodules within an installation. The Cluster has an associated Application Type, and only Submodules of the same type can be added. Submodules with output
function can be part of both their origin Group and a Cluster. The input function of a Submodule can
only be bound to one target Group.
2.2

Physical Structure

An Installation is all the physical digitalSTROM equipment in a house or flat.
The Building comprises the Installation. Building and house or flat may have differences regarding to
ownership of properties.
The power line installation is Circuit based. In the simple case a power circuit completely covers solely
one room, then a single room consists of the whole circuit and holds all of its attached devices. A circuit
often spans over multiple rooms, then multiple rooms are related to one physical circuit.
An IP Network is mostly unstructured and is unrelated to rooms. The digitalSTROM IP Infrastructure
adds such functionality to the network by organizing and managing network components.
2.3

Application Types

digitalSTROM associates each Application Type with a well-defined behavior that reflects the common
expectation of the residents and users. This is represented in the standard behavior of Devices, and
defines how Devices react upon reception of certain events.

8

Applications are aggregated into digitalSTROM Color Groups. The following color groups are defined:
Application Types

Color

Name

Room lights, Garden lights, Building illuminations

Yellow

Lights

Blinds, Shades, Awnings, Curtains

Gray

Blinds

Heating, Cooling, Ventilation, Temperature control, Window Blue

Climate

Music, Radio

Cyan

Audio

TV, Video

Magenta Video

Alarms, Fire, Panic

Red

Security

Doors, Door bells, Access control

Green

Access

Table 1: digitalSTROM Colors
Some Native Devices in the home do not fit into those application categories. For example:
• Refrigerator
• Vacuum cleaner
• Coffee maker
• Water kettle
• Cooker hood
These devices are grouped into the category ”Single Devices” and have the color ”White”. Mostly those
kind of devices are used as a single appliance, they are not perceived as an application of a room.
However the ”Single Devices” are still physically located in one room.

9

3

Structure Objects

The following sections describe data model objects of a digitalSTROM installation.
3.1

Zone

A zone is the logical representation of one room, hall and other partial structural works of the building.
3.2

Group

A group is the representation of an application type.
Group ID Name

Color

Application

1

Lights

Yellow

Room lights

2

Blinds

Gray

Blinds, curtains, shades, awnings

3

Heating

Blue

Heating

9

Cooling

Blue

Cooling

10

Ventilation

Blue

Ventilation

11

Window

Blue

Windows

12

Recirculation

Blue

Ceiling fan, Fan coil units

64

Apartment Ventilation Blue

Ventilation system

48

Temperature Control Blue

Single room temperature control

4

Audio

Cyan

Playing music or radio

5

Video

Magenta TV, Video

8

Joker

Black

Configurable

n/a

Single Device

White

Various, individual per device

n/a

Security

Red

Security related functions, Alarms

n/a

Access

Green

Access related functions, door bell

Table 2: digitalSTROM Application Groups
Devices of the type Joker are customizable. In most cases the hardware allows them to be used with
different native devices. For example the relay adapter plug or a wall push button input line can be
connected by the user to the equipment they are shall be used for. Logically the Joker devices can be
assigned by the user to the appropriate application type that matches the native device.
Application Groups of the digitalSTROM system can be categorized by their usage:
• Room applications
• Apartment applications
• Control and regulation applications
• User defined grouping of an existing application
3.3

Device

Devices in digitalSTROM system are represented and integrated in different ways:
• Combination of a Power-Line terminal block with an attached electrical native device
• Appliance with control equipment and integrated with a Power-Line interface module (dS-Tiny)
• Native IP device integrated with a digitalSTROM software stack (Device Connector, a.k.a VDC)
10

A digitalSTROM-Device is the term for a Device that is integrated into digitalSTROM, follows the well
defined system behavior and data model, and has digitalSTROM communication capabilities.
The individual functions of digitalSTROM-Device are called Submodule. The Submodules are logically
related to the functional groups depending on their use. Each submodule of a digitalSTROM-Device is
assigned exactly to one application type and zone.
A digitalSTROM-Ready-Device is a device which complies to all rules of the digitalSTROM concept.
Rule 1 A digitalSTROM-Ready-Device has to be preconfigured in the right application group. This is
essential to ensure that all devices in one application group can be orchestrated together.
Rule 2 Each submodule of a digitalSTROM-Ready-Device must be configured for exactly one digitalSTROM application group. digitalSTROM-Ready-Device have the application type statically configured
to allow for Plug&Play and automatic registration processes..
Rule 3 The function of a devices output is the basis of its group membership. For devices without output
function the target function of the switch button decides about the group membership.
The concept of digitalSTROM Devices is independent from the underlying technology of the communication hardware. Thus the digitalSTROM system represents any kind of hardware equipment with the
same model and methods, on condition that the hardware has communication capabilities and can be
uniquely identified. Both digitalSTROM Powerline Terminal Blocks, Native IP Devices or via an IP Gateway any other device with different kind of communication technology can be seamlessly integrated.
3.4

Area

An area is built by a subset of devices within a zone. This is a user definable set of devices. This is
achieved by individual device configuration and is not based on an addressing mechanism.
3.5

Cluster

A cluster is built by a subset of devices of the same group from any zone. This is a user definable set of
devices. For example Clusters can be defined like:
• all shades in the first floor
• the shades with orientation to the south
• all lights that are part of the garden and outdoor illumination
The devices of a Cluster are still part of their respective zone and are under control of the room group
operations.
3.6

Circuit

The circuit is the physical connection between the circuit breaker and digitalSTROM-Meter on one end
and each electric device connected on this line on the other end.
3.7

IP Network

IP network comprises the whole network infrastructure in the smart home. This includes all user
devices, smart appliances, gateways and infrastructure components.
3.8

Identification

digitalSTROM Terminal Blocks are uniquely identified by a 32 bit serial number. This number is stored
in non-volatile memory on the device and can be read programmatically by the system.
digitalSTROM-Devices itself are described by a global trade item number (GTIN, see glossary, 13.10).
If the digitalSTROM-Device is combined with the Native Device this new article shall get a new GTIN,
additionally to that one of the Native Device. This new GTIN can be stored on and read from the Terminal
Block.

11

The serial number of the Terminal Block and the GTIN of the article are combined to build serialized
global trade item number (SGTIN). The GTIN and SGTIN are standardized formats for identifying trade
items defined and maintained by the GS1 organization.
Following the SGTIN-96 and the RFC-4122 UUID standard the digitalSTROM system identifies any digitalSTROMDevice with an unique number called dSUID (see glossary 13.3).

12

4

Event Objects

The digitalSTROM concept is based on a hierarchical architecture. Three context levels communicate
bidirectional using event objects on different abstraction levels. The Device level is represented by
digitalSTROM-Devices, the System layer has a logical context in the zone and is physically represented
by a digitalSTROM-Meter, and the User level which is present on the digitalSTROM-Server and its system customization through user definable actions and automatisms.
4.1

Device Level

On the device level digitalSTROM generates Low-Level-Events to signal and forward events to the system. Low-Level-Events are caused by sensor input data. Device level events do not have a context, they
are not bound to a zone or functional group.
Examples for Low-Level-Events are the events generated if a wall switch is pressed and a device on-off
switch is toggled.
4.2

System Level

The system layer processes Low-Level-Events, adds the context information of the event, and generates System-Level-Events. The event context consists of the corresponding zone of the device where
the event occurred, the target function and color group of the device and the current state of the functional group in the specific zone. System-Level-Events are sent downstream as system actions and are
forwarded upstream. Low-Level-Events without relevance on the system layer may bypass the system
level processing and will only be forwarded to upper layers.
For example the commands to turn the lights in a room on and to open the blinds are System-LevelEvents.
4.3

High Level

The highest layer receives System-Level-Events and provides them and additionally the system state
for further processing and for external applications. The System-Level-Events are evaluated by user
level applications and enables them to generate appropriate response actions taking user behavior and
user defined parameters into account.
The user level descriptions Turn light on in living room and Breakfast are examples for High-LevelEvents. With digitalSTROM-Server modules the user is able to define his own personalized event descriptions and thus to create a customized system behavior.
For a few High-Level-Events it is very likely that any user has the same understanding of the event
meaning. Those High-Level-Events with high standardization potential are mapped directly to SystemLevel-Events, for example the door bell signal.
4.4

Information Flow

The following graph illustrates the information flow between the three layers.

13

Figure 1: digitalSTROM Information Flow
4.5

Operating Concept

The functional groups and the zone are the central objects of the digitalSTROM operating concept (7).
Calling presets for groups in a zone is the basic method to control digitalSTROM devices. Therefore
this standard defines the default preset values for devices in each group to guarantee the well defined
system behavior. Those default presets are subject of the particular functional group documents.
From users point of view the room wall switches are the direct interface to the operating concept. For
example a traditional light switch is expected to turn the lights in a room on and off. A digitalSTROM
wall switch behaves exactly like that, if the underlaying digitalSTROM pusbbutton device and the cor-

14

responding digitalSTROM light actuators belong to the light group. This Plug’n’Play mechanism uses
an autodetection of device configuration and capabilities (E).
4.6

Distributed Intelligence

A central aspect of the digitalSTROM topology is the distributed intelligence. On device layer any
digitalSTROM-Device has the knowledge how to react to System-Level-Events (see 5), and on the system layer the logic is split into the electrical circuits.
Due to the distributed logic there is no need for a central communication management and the configuration complexity is reduced. Furthermore the overall system reliability is inherently increased.

15

5

Scenes, Activities and Presets

A scene is the command that is sent to a group of devices and results in changes of output actuator
states. Each digitalSTROM-Device keeps a table of preset values locally and knows how to react to
scene commands.
Every digitalSTROM-Ready-Device has a well defined default scene configuration depending on its functional group. These standardized values ensure system compatibility and guarantee that future products and devices will behave harmonically in the existing infrastructure.
The actuator change depends on the individual device configuration. Though there are the preset values
defined, this configuration can be modified by the user to adopt device behavior to his needs. This
personalization is the basis for creating different preconfigured scenarios which can be activated by a
single scene command.
Scenes directly correspond to System-Level-Events. An activity is the process of posting a scene command, in the API documentation also referred as call scene.
On device level scene commands may have different effects:
• setting an absolute output value for each output channel
• relative output value changes
• stopping an output value change process, applies to actions that take longer time to complete
• ignoring the command and not to react on a specific scene
• temporary changing the output state for signalling or identification purposes
Details of the scene configuration are explained in appendix Device Scene Table.
The digitalSTROM system implements 128 scene commands. The first half of 64 scenes is used for
group specific actions, the second half are used in the context of a zone or for system wide functions.
The group related scenes may have different meanings depending on the functionality of the group. For
example the activities ”Light On” and ”Open Blinds” share the same scene command.
Rule 4 digitalSTROM-Devices have to implement a default behavior for all 128 scene commands. The
system behavior and default values are defined in the particular documents for each functional group.
5.1

Function and group related scenes

The first 64 scene commands are related to the functional group. The intended behavior and the resulting preset is group dependent. The command is transferred using a multicast addressing scheme
and is executed by every device that is part of the target group (addressing detailed in ).
On the system layer the zone and group state machines track the activities and keep the status of the
currently active scene. Thereby the system layer is able to implement state dependent behavior 7.
Rule 5 When applications send a scene command to a set of digitalSTROM-Devices with more than
one target device they have to use scene calls directed to a group, splitting into multiple calls to single
devices has to be avoided due to latency and statemachine consistency issues.
Section B defines the details of the terms and values.
5.1.1

Basic Presets

digitalSTROM defines 5 sets of basic presets per functional group. Each of these sets has different
scene commands and separate configuration values in the digitalSTROM-Devices.
The default presets for room lights are defined as follows:

16

Activity Description
Preset 0 Lights off
Preset 1 Lights on
Preset 2 Lights on, Brightness 75%
Preset 3 Lights on, Brightness 50%
Preset 4 Lights on, Brightness 25%
Auto Off Lights fading slowly off
Table 3: Light Preset 0…4
The default presets for room ventilation are defined as follows:
Activity Description
Stage 0 Off
Stage 1 Air flow intensity 25%
Stage 2 Air flow intensity 50%
Stage 3 Air flow intensity 75%
Stage 4 Air flow intensity 100%
Boost

Air flow intensity 100% for limited time
Table 4: Ventilation Stage 0 …Boost

5.1.2

Stepping

digitalSTROM defines scene commands for stepping or dimming operations. Those commands increment or decrement the output value of actuators by a defined delta value.
Rule 6 digitalSTROM-Ready-Devices must ignore stepping commands if their output value is zero.
5.1.3

Area scenes

digitalSTROM defines 4 subsets of a group in a zone, called areas. The system implements distinct area
commands for ”On/Off” and stepping operations.
5.1.4

Local push button

digitalSTROM defines special scenes commands to reflect the usage with a device switch operated
locally. These operations include ”Local On”, ”Local Off” and ”Local Stop”.
5.1.5

Special scenes

digitalSTROM defines special scene commands for forcing the device to set the output value to maximum and minimum value. An additional scene command forces an output value change process to be
stopped immediately.
5.1.6

Temperature control scenes

The room temperature control group uses its own set of system-level-events to control the system behavior of the control algorithm. Each control scene is related to a predefined behavior and is associated
with setpoint values for the temperature.

17

5.2

Group independent scenes

The second half of 64 scene commands have a group independent meaning. Some of them are standardised High-Level-Events (e.g. Wakeup or Sleeping). Others are used for system wide functions (e.g.
Absent, Door Bell), which are either a signal or an apartment state.
Section B.8 defines the details of the terms and values.
5.2.1

Deep Off

The activity Deep Off indicates that a zone is inactive and the user won’t need the digitalSTROM-Devices
in this single zone for a longer time. digitalSTROM-Ready-Devices shall turn their power off. Devices
with an integrated LED should indicate this state and turn it off.
5.2.2

Standby

The activity Standby indicates that a zone is inactive but the user might return in a short term. digitalSTROMReady-Devices shall switch to a standby mode.
5.2.3

Zone Active

The activity Zone Active indicates that a zone will become active in a short term and devices should be
prepared to be powered on.
5.2.4

Auto Standby

The activity Auto Standby indicates that a zone is inactive. This signal is mainly provided to be generated
automatically.
5.2.5

Absent

The activity Absent indicates that the residents left their home. Devices which do not have to be necessarily on should turn their power off. This is an apartment state and will be reset by the Present scene
command.
5.2.6

Present

The activity Present indicates that the residents came back to their home. Devices that the user expects
to be immediately availabe should turn their power on or go into standby mode.
5.2.7

Sleeping

The activity Sleeping indicates that the apartment switches to night operation and the residents go to
sleep.
5.2.8

Wakeup

The activity Wakeup indicates that the apartment switches to daytime and the residents wake up. Devices which are likely to be used in the morning should be prepared to be powered on.
5.2.9

Door Bell

The activity Door Bell indicates that someone is standing in front of the house door and wants to get in.
This is a signal and does not change any group or zone states.
5.2.10 Panic
The activity Panic indicates that the user is scared and believes there is someone in the apartment
who should not be there. digitalSTROM-Ready-Devices shall switch to a protection state. This is an
apartment state and will be reset by the associated undo scene command (see 6.1.2).
18

5.2.11 Fire
The activity Fire indicates an active fire alarm and is meant as an additional alarm signal for the residents. This is an apartment state and will be reset by the associated undo scene command (see 6.1.2).
5.2.12 Alarm
The activities Alarms [1..4] indicate an active alarm and is meant as an user definable alarm signal for
the residents. This is an apartment state and will be reset by the associated undo scene command (see
6.1.2).
5.2.13 Wind
The activity Wind is a signal to protect equipment and hardware of being damaged by high wind force or
gust. This is an apartment state but can be used in a cluster as well. The state is reset by the associated
No Wind activity.
5.2.14 Rain
The activity Rain is a signal to protect equipment and hardware of being damaged by rain and water.
This is an apartment state. The state is reset by the associated No Rain activity.
5.2.15 Hail
The activity Hail is a signal to protect equipment and hardware of being damaged by a hail storm. This
is an apartment state but can be used in a cluster as well. The state is reset by the associated No Hail
activity.
5.2.16 Pollution
The activity Pollution is a signal to warn residents about air pollution. Ventilation systems can adopt
accordingly and protect residents against letting bad air in. This is an apartment state and will be reset
by the associated undo scene command (see 6.1.2).
5.2.17 Burglary Alarm
The activity Burglary indicates an active burglary alarm raised by alarm systems or sensors. This is an
apartment state and will be reset by the associated undo scene command (see 6.1.2).
5.3

Local Priority

The local priority is a special device state where usually scene commands with group relation are ignored. This state is triggered by local push button presses on the device itself or by a particular device
action command which is used by the zone state machine for area scene commands (see 6.1.4).
The intended behavior for the local priority is to allow the device to keep its locally requested state even
if the zone/group state is changed by the user.
This state is reset by turning the device locally off or by specific scene commands that force to change
the output state regardless of the local priority. For example the system wide function Absent shall have
an effect on room lights regardless if they were turned on locally.

19

6

Actions

A digitalSTROM-Device must understand the actions detailed in this section.
6.1

Scenes

The scene actions can be sent to:
• a group of devices in a zone
• all devices in a zone
• all devices of a group in any zone
• a single device
6.1.1

Calling a Scene

The digitalSTROM-Device executes the given scene command and changes the output state according to
its scene table value and configuration flags. The scene and state is valid until another scene command
is executed.
If the device is in the local priority state the scene is only executed if the IgnoreLocalPrio flag is set
in the scene table for the called scene. The execution of this command can optionally be forced and
regardless of current local priority state.
6.1.2

Undo a Scene

The digitalSTROM-Device reverts all effects of the currently executed scene and executes the previously
active scene. Only one previous scene command has to be stored. If no previous scene command is
available this call shall be ignored.
The action can be constrained to only revert a specific scene command.
6.1.3

Store Current Value

Persistently store the current value of the digitalSTROM-Device’s output in the scene table at the given
scene command.
6.1.4

Activate Local Priority

If the digitalSTROM-Device is currently executing the given scene, activate the local priority state. This
action remotely sets the local priority state for a group of devices.
6.1.5

Set to Lowest Stepping Step

Prepare the digitalSTROM-Device to start stepping from the off state. If the scene table contains a non
zero value at the given scene number execute the scene according to the scene table but set the output
value to the minimal stepping value instead of the value in the scene table.
This action is necessary for stepping operations when the state of the addressed group is ”Off”. Compare to the rule for scene commands Stepping, where stepping commands are to be ignored for devices
in the Off state.
6.2

Programming Mode

The programming mode actions are used internally by the digitalSTROM-Meter to control the wall
switch scene programming operation.

20

6.2.1

Programming Mode Start

This action indicates the start of a programming operation. Operate the digitalSTROM-Device’s output in order to identify the device in the installation. The operation must complete within 4 seconds
and the device must return to the previous state afterwards. Also prepare the device for scene table
programming.
Rule 7 digitalSTROM-Device have to complete the identification action on the command Programming
Mode Start within 4 seconds.
6.2.2

Programming Mode Finish

This command indicates the end of a programming operation. Operate the digitalSTROM-Device’s output in order to identify the device in the installation. The operation must complete within 4 seconds and
the device must return to the previous state afterwards.
6.3

Configuration

6.3.1

Read and Write Device Parameters

For configuration purposes a digitalSTROM-Device must support the reading and writing of device parameters. The device parameters are detailed in appendix sections C and D.
Rule 8 Application processes that do automatic cyclic reads or writes of device parameters are subject
to a request limit: at maximum one request per minute and circuit is allowed.
6.4

Sensor Values

6.4.1

Read Device Sensor Values

digitalSTROM-Devices with sensor equipment provide a table with entries for each available sensor.
The table entries and the corresponding measurements are detailed in C.2.8 and 12.1.
Rule 9 Application processes that do automatic cyclic reads of measured values are subject to a request
limit: at maximum one request per minute and circuit is allowed.
6.4.2

Distribute Sensor Value

The command distributes a single numerical measured value. The measurement can be sent to:
• a group of devices in a zone
• all devices in a zone
• all devices of a group in any zone
digitalSTROM-Devices may change their output state depending on their type and configuration.
6.5
6.5.1

Miscellaneous
Device Identification (a.k.a. ”Blink”)

Operate the digitalSTROM-Device output in order to identify the device in the installation. For example
for a light device: on-off-on-off or a shade device: up-down-up-down.
6.5.2

Directly Set Output Value

Unconditionally set the digitalSTROM-Device’s output value. The current local priority state is ignored.
Rule 10 The action command ”Set Output Value” must not be used for other than device configuration
purposes.

21

7

Function and group state machines

The Low-Level-Events generated by devices are received and interpreted by the digitalSTROM-Meter.
The digitalSTROM-Meter translates these events (8.2) into actions (6). This translation process takes
several parameters into account, like type and group membership of the originating device.
The translation is done according to function specific state machines (SM). These state machines define
the user visible behavior of a digitalSTROM system. The SMs each have a state per context appropriate
to the function (e.g. per function and zone, per function in an installation, per installation). The state
machines are also responsible for the handling of STOP actions in functions where it is required.
For a detailed description of the behavior refer to the function specific state machine documents.

22

8

Communication Objects

8.1

Device Level Physical Layer

The transfer direction of events from device to system level is called upstream, the system to device
event transfer direction is the downstream direction.
8.1.1

Downstream

Downstream data is sent by the digitalSTROM-Meter and received by any digitalSTROM-Device on the
same power circuit. The downstream commands are received by all devices but only processed by
previously selected devices and ignored by all others.
8.1.2

Upstream

Upstream data is sent by the digitalSTROM-Device and received by the digitalSTROM-Meter on the same
power circuit. Other digitalSTROM-Devices on the same power circuit do not receive the upstream event
data.
8.1.3

Automatic Repeat Query (ARQ)

In case of parallel transmissions of upstream data by two or more digitalSTROM-Devices the event
data may not be received by the digitalSTROM-Meter. To guarantee delivery of event data the system
implements an automatic repeat query mechanism. An automatic retransmission of the event data
takes place if the upstream reception is not acknowledged within a defined timeout period.
Generally there is an explicit acknowledge command necessary, but several actions can make use of
an implicit acknowledge by reception of downstream scene commands.
8.1.4

Latency

Event transfer over the power line takes noticeable time, which increases in case of retransmissions.
The overall latency of typical actions is shown in table 5.
Description

Latency in ms

Pushbutton tip to resulting system level event
reception by devices

600

Query of device parameter to reception of value 1200
Downstream transmission of zone/group scene
command to reception by devices

250

Table 5: Latency of typical operations
8.1.5

Addressing

The downstream communication implements three different levels of addressing.
Broadcast Broadcast addressing is defined both for zones and groups. A zone number of zero indicates
that a downstream command is directed to all devices regardless of their zone membership. A
group number of zero indicates group broadcast addressing and the downstream command is
directed to all devices regardless of their group membership.
Group and Cluster Sending commands to a specific group or cluster within a zone is known as multicast addressing. This method is preferred for scene commands.
Device Unicast addressing to a single device is the slowest transfer mechanism. This method is mainly
used for configuration purposes.
23

8.2

Device Level Events

Events on device level are generally created due to any sensor input data being available. The sensor
data is then evaluated and preprocessed by device specific decision engines and state machines.
If the pushbutton configuration is local device mode the device decides about local actions it has to take.
If the device is about to change its output state it has to send this information upstream.
If the pushbutton configuration is system mode the event information has to be sent upstream. System
mode includes zone pushbuttons, area pushbuttons, application mode, any mode which is not exclusive
processed locally in the device.
8.2.1

Pushbutton

Pushbutton event data include a button index and the type of key press. Details of this event are defined
in section 10.
Pushbutton events are used as direct input to the system state machines (7).
8.2.2

Binary Input Event

Binary input events are generated by level triggered input lines. They have the binary states on or off.
Binary input events are used as direct input to the system state machines (22).
8.2.3

Status Event

digitalSTROM-Devices can generate events depending on status changes of internal applications. This
includes malfunctions, error conditions and device specific notifications.
8.2.4

Sensor Event Table

digitalSTROM-Devices may implement a generic preprocessing algorithm which allows generation of
events depending on thresholds of sensor input data. The thresholds and limits for the preprocessing
algorithm are stored in well defined table format in the digitalSTROM-Device. Details of the event table
format are defined in the appendix Class 6 - Sensor Event Table.
The event data includes the index of the triggering table row. This index is unique only per device. These
table index events are device specific and therefore not system relevant and bypass the system state
machines. They are signalled on the user level.
8.2.5

Limits

digitalSTROM-Ready-Devices must ensure that they do not monopolize the upstream data channel.
They must have a transmission control algorithm that controls the upstream event data rate.
Rule 11 digitalSTROM-Ready-Devices must not send upstream events continuously and must stop sending Low-Level-Event data even if the event is still or repeatedly valid. Transmission of pushbutton
events must be abandoned after a maximum time of 2.5 minutes. Automatically generated events must
not exceed a rate limit of 10 events per 5 minutes.
8.3

System level communication

digitalSTROM uses a central communication controller digitalSTROM-Meter (dSM) on each power circuit placed directly behind the circuit breaker. The dSM’s are connected among themselves and with
the digitalSTROM-Server over a RS485 line and communicate using the dS485 protocol.

24

8.3.1

dS485 Protocol

The dS485 protocol is a data link layer communication protocol running over a shared medium. The
protocol implements token passing medium access control and thus guarantees a fair scheduling of
transmission requests.
8.3.2

dSM-API

The dSM-API is the application layer protocol to interface with the digitalSTROM components. From
external application side the dSM-API is an internal interface, enclosed in the digitalSTROM-Server
and must not be used directly.
8.3.3

dSS JSON

The digitalSTROM-Server provides a JSON webservice interface for external applications. This interface includes an abstract representation of the digitalSTROM components and a convenient access to
the digitalSTROM data model.
Rule 12 Applications shall use the digitalSTROM-Server webservice interface for communication with
the digitalSTROM system. Directly interfacing the dSM-API shall be avoided because it is an internal
interface and its API may change in the future.
8.3.4

Limits

Applications must ensure that they do not monopolize the downstream data channel. Therefore they
have to take care that scene commands are not executed at an arbitrary rate.
Rule 13 Applications that automatically generate Call Scene action commands (see 6.1.1) must not execute the action commands at a rate faster than one request per second.

25

9

Outputs

The output functions of a device are represented as Submodules in the system, see 3.3.
Output functionalities are described by channels. Outputs can be built by multiple different channels
that somehow depend on each other. All channels of one output belong to the same Submodule.
Device scene configuration (5) for an output needs a setting for every channel, if there are multiple
channels existing. This settings for every scene per channel include:
• output value
• don’t care flag: retain output
• automatic flag: operate in automatic mode
The digitalSTROM system defines several standard types of output channels, see table 6 below. Devices
tell the system upon registration which channel types they support.

26

9.1

Output Channel Types

ID Description

Channel Name

Min Max

Unit

1

Light Brightness

brightness

0

100

percent

2

Colored Light Hue

hue

0

360

degrees

3

Colored Light Saturation

saturation

0

100

percent

4

Color Temperature

colortemp

100 1000

5

Light CIE Color Model x

x

0

10000 scaled to 0.0 to 1.0

6

Light CIE Color Model y

y

0

10000 scaled to 0.0 to 1.0

7

Shade Position Outside (blinds)

shadePositionOutside

0

100

percent

8

Shade Position Outside (curtains)

shadePositionIndoor

0

100

percent

9

Shade Opening Angle Outside (blinds)

shadeOpeningAngleOutside

0

100

percent

10 Shade Opening Angle Indoor (curtains)

shadeOpeningAngleIndoor

0

100

percent

11 Transparency (e.g. smart glass)

transparency

0

100

percent

12 Air Flow Intensity

airFlowIntensity

0

100

percent

13 Air Flow Direction

airFlowDirection
0
0=both(undefined), 1=supply
(in), 2=exhaust (out)

2

specific

14 Flap Opening Angle

airFlapPosition

0

100

percent

15 Ventilation Louver Position

airLouverPosition

0

100

percent

16 Heating Power

heatingPower

0

100

percent

17 Cooling Capacity

coolingCapacity

0

100

percent

18 Audio Volume (loudness)

audioVolume

0

100

percent

19 Power State

powerState
0
0=powerOff,
1=powerOn,
2=forcedOff, 3=standby

2

specific

20 Ventilation swing mode

airLouverAuto
0=not active, 1=active

0

1

specific

21 Ventilation auto intensity

airFlowAuto
0=not active, 1=active

0

1

specific

22 Water Temperature

waterTemperature

0

150

celsius

23 Water Flow Rate

waterFlow

0

100

percent

24 Power Level

powerLevel

0

100

percent

mired

Table 6: Output channel types
ID’s from 25 to 191 are reserved and must not be used. ID’s from 192 to 239 are reserved for device
specific (proprietary) channels.
9.2

Application Group Defaults

Each digitalSTROM application group has a primary channel type. The primary channel is the default
output channel on which the common dimming commands operate.

27

Group ID Name

Primary Channel

1

Room Lights

Brightness

2

Shades

Shade Position Outside (blinds)

3

Heating

Heating Power

9

Cooling

Cooling Power

10

Ventilation

Airflow Intensity

12

Recirculation

Airflow Intensity

64

Apartment Ventilation Airflow Intensity

4

Audio

Audio Volume

5

Video

Audio Volume
Table 7: application types and the primary output channel

28

10

Pushbuttons

The term pushbutton refers to the input line of a digitalSTROM terminal block for wall switches or the
on-off switch of electrical devices. digitalSTROM requires to use pushbuttons instead of switches to
be able to enhance the simple on-off functionality. digitalSTROM-Devices are able to detect in which
manner the user activated the button, for example a single tip, a hold operation, or fast sequence of
consecutive tips.
10.1 Input Processing
10.1.1 Timing
Depending on the duration and pulse duty of pushbutton tips different events are generated. The following table defines the timing requirements of the pushbutton evaluation. A ”H” (High) means the
button input is Active, a ”L” (Low) means the input is inactive.
Pushbutton Event Timing
Single Tip

140ms <= H < 500ms

Double Tip

140ms <= H < 500ms, L < 800ms,
140ms <= H < 500ms

Triple Tip

140ms <= H < 500ms, L < 800ms,
140ms <= H < 500ms, L < 800ms,
140ms <= H < 500ms

Quadruple Tip

140ms <= H < 500ms, L < 800ms,
140ms <= H < 500ms, L < 800ms,
140ms <= H < 500ms, L < 800ms,
140ms <= H < 500ms a

Hold Start

H >= 500ms b

Single Click

H < 140ms

Double Click

H < 140ms, L < 140ms, H < 140ms

Triple Click

H < 140ms, L < 140ms, H < 140ms,
L < 140ms, H < 140ms

Short-Long

H < 140ms, L < 140ms,
H>= 500ms

Short-Short-Long H < 140ms, L < 140ms,
H < 140ms, L < 140ms, H >= 2500ms
a

Subsequent tips start again at generating Double-Tip signals and wrap around each 3 tips: Single Tip - Double Tip - Triple
Tip - Quadruple Tip - Double Tip - Triple Tip - …
b
After initial ”Hold Start” detection each second a ”Hold Repeat” signal is generated. After the button input is released a
”Hold End” signal is generated.

Table 8: Pushbutton timing
10.2 Low-Level-Events
A pushbutton operates either in device or in zone mode, and it may have one (1-way) or two input lines
(2-way). Depending on this configuration the pushbutton has a different system behavior. In device
mode some operations are executed only locally.
The pushbutton input events are encoded using a Click-Type and a Key-Number. The tupel of Click29

Type and Key-Number identifies the kind of Low-Level-Event. Where Click-Type encodes the manner
the button has been activated, the Key-Number is an index for the operating mode of the pushbutton
depending on 1-way, 2-way and device or zone mode.
The following sections describe the different Low-Level-Events generated by pushbutton clicks in dependence of the operation mode. The Low-Level-Event names listed in the tables below are used as
input signal names in the state machine documentation of the particular functional groups.
Notice The short-short-long sequence is always reserved for device internal use and configuration
purposes.

10.2.1 1-way device pushbutton
In device pushbutton mode the Single Tip events are processed locally and toggle the output state of the
device. If the device output is in a slow change operation a Single Tip stops the change process.
The Hold Start event is processed locally if the device output is active and step the output value alternately down and up. If the output is inactive the button hold operation sequence is signaled upstream
with an initial Hold Start, consecutive Hold Repeat and a final Hold End event.
The short-long sequence is processed locally and enables local configuration of the default scene values for Preset1 to Preset4.
If digitalSTROM-Devices do not have an output the local pushbutton mode is not supported.
Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

12

4

LOCAL_ON

Hold Start

4

4

HOLD_START

Hold Repeat

5

4

HOLD_REPEAT

Hold End

6

4

HOLD_END
Table 9: Output off or inactive

Pushbutton Event

Click type Key Number Low Level Event Name

Single Tip

11

4

LOCAL_OFF

End of local dimming 15

4

LOCAL_DIM
Table 10: Output on or active

Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

14

4

LOCAL_STOP

Table 11: Output is currently changing

30

Pushbutton Event Click type Key Number Low Level Event Name
Double Tip

1

4

TIP_2X

Triple Tip

2

4

TIP_3X

Quadruple Tip

3

4

TIP_4X

Single Click

7

4

CLICK_1X

Double Click

8

4

CLICK_2X

Triple Click

9

4

CLICK_3X
Table 12: Output in any state

10.2.2 1-way zone or area button
There is no local processing of input events in zone or area mode. All events are forwarded upstream
regardless of the device output state.
Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

0

0

TIP_1X

Double Tip

1

0

TIP_2X

Triple Tip

2

0

TIP_3X

Quadruple Tip

3

0

TIP_4X

Single Click

7

0

CLICK_1X

Double Click

8

0

CLICK_2X

Triple Click

9

0

CLICK_3X

Hold Start

4

0

HOLD_START

Hold Repeat

5

0

HOLD_REPEAT

Hold End

6

0

HOLD_END

Table 13: Zone pushbutton Low-Level-Events
10.2.3 2-way device pushbutton
Pushbuttons with two input lines have designated Up and Down functions. Input on these buttons generate different Low-Level-Events than the 1-way button.
In device pushbutton mode the Single Tip events on both inputs are processed locally, tips on the Up
input turns the device output on, tips on the Down input turn it off.
The Hold Start event on both input lines is processed locally and step the output value accordingly up
and down. Holding the Up button if the output is inactive turns the output on, if the output is capable of
stepping with the lowest possible output value otherwise with the maximum output value. Holding the
Down button if the output is active steps the output value down:
• if the device output is capable of stepping the output value is reduced down to the minimum value
but not to the off state,
• switched mode outputs do ignore Hold Start events.
If the output is inactive the button hold operation sequence on the Down input is signaled upstream with
an initial Hold Start, consecutive Hold Repeat and a final Hold End event.
The short-long sequence is processed locally and enables local configuration of the default scene values for Preset 0…4 to Preset 40…44.

31

If digitalSTROM-Devices do not have an output the local pushbutton mode is not supported.
Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

11

5

LOCAL_OFF

Hold Start

4

5

HOLD_START_DOWN

Hold Repeat

5

5

HOLD_REPEAT_DOWN

Hold End

6

5

HOLD_END_DOWN

Table 14: Down input, output off or inactive

Pushbutton Event

Click type Key Number Low Level Event Name

Single Tip

11

5

LOCAL_OFF

End of local dimming 15

5

LOCAL_DIM

Table 15: Down input, output on or active

Pushbutton Event Click type Key Number Low Level Event Name
Double Tip

1

5

TIP_2X_DOWN

Triple Tip

2

5

TIP_3X_DOWN

Quadruple Tip

3

5

TIP_4X_DOWN

Single Click

7

5

CLICK_1X_DOWN

Double Click

8

5

CLICK_2X_DOWN

Triple Click

9

5

CLICK_3X_DOWN

Table 16: Down input, output in any state

Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

12

6

LOCAL_ON

Double Tip

1

6

TIP_2X_UP

Triple Tip

2

6

TIP_3X_UP

Quadruple Tip

3

6

TIP_4X_UP

Single Click

7

6

CLICK_1X_UP

Double Click

8

6

CLICK_2X_UP

Triple Click

9

6

CLICK_3X_UP

Table 17: Up input, output in any state
10.2.4 2-way zone or area button
There is no local processing of input events in zone or area mode. All events are forwarded upstream
regardless of the device output state.

32

Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

0

1

TIP_1X_DOWN

Double Tip

1

1

TIP_2X_DOWN

Triple Tip

2

1

TIP_3X_DOWN

Quadruple Tip

3

1

TIP_4X_DOWN

Single Click

7

1

CLICK_1X_DOWN

Double Click

8

1

CLICK_2X_DOWN

Triple Click

9

1

CLICK_3X_DOWN

Hold Start

4

1

HOLD_START_DOWN

Hold Repeat

5

1

HOLD_REPEAT_DOWN

Hold End

6

1

HOLD_END_DOWN

Table 18: Down input, 2-way zone pushbutton

Pushbutton Event Click type Key Number Low Level Event Name
Single Tip

0

2

TIP_1X_UP

Double Tip

1

2

TIP_2X_UP

Triple Tip

2

2

TIP_3X_UP

Quadruple Tip

3

2

TIP_4X_UP

Single Click

7

2

CLICK_1X_UP

Double Click

8

2

CLICK_2X_UP

Triple Click

9

2

CLICK_3X_UP

Hold Start

4

2

HOLD_START_UP

Hold Repeat

5

2

HOLD_REPEAT_UP

Hold End

6

2

HOLD_END_UP

Table 19: Up input, 2-way zone pushbutton
10.3 System Interfaces
10.3.1 Settings
digitalSTROM-Devices may have one pushbutton which can operate in different modes as described
above. Beside the one system pushbutton there may be additional buttons with local functionality only.
Notice digitalSTROM supports only one pushbutton per digitalSTROM-Device with system functionality.
Although used by the upper layer state machines the pushbutton operating mode parameters are stored
locally on the device. That way the system can retrieve the mode parameters from the device and
synchronize the settings.
10.3.2 Event Limits
digitalSTROM-Devices have to take care about pushbutton or input malfunctions and may not generate
any number of events, see 8.2.5.

33

10.3.3 Configuration
The pushbutton parameters that are relevant for the system behavior and the state machine operations
are stored on the digitalSTROM-Device itself. This ensures that a device operates in the same mode
regardless of the circuit and zone where it is plugged in.
Operating Mode This 4-Bit value ButtonId is stored in the device register LTNUMGRP0 (see C.3.2).
Target Group This 4-Bit value ButtonGroup is stored in the device register LTNUMGRP0 (see C.3.2).
Button Input Mode
C.3.6).

This 8-Bit value ButtonInputMode is stored in the device register LTMODE (see

34

11

Binary Inputs

The term binary input refers to an input line of a digitalSTROM-Device which is connected to an corresponding binary status output signal of an electrical device. This input type is used for automation
purposes and provides an interface to different kinds of status outputs.
For example smoke detectors, wind monitors or motion detectors provide a binary status signal.
11.1 Low-Level-Events
Each transition on the input line is signaled with an appropriate upstream event. Additionally, the state
of a binary input line must be available at any time for synchronization, e.g. on system startup.
The binary input events are encoded using a binary data type, the data may be either 0 (inactive) or 1
(active).
The status of an input line is always available as a status value on the digitalSTROM-Server. The status
change of an input line can be used as trigger for user defined activities.
digitalSTROM-Devices have to take care about event rate limits input and may not generate an arbitrary
number of events, see 8.2.5.
11.2 Input Types
Each binary input line of digitalSTROM Terminal Block has an associated type. This type is determined
by the device registration process and later on evaluated for each binary input event received from this
digitalSTROM-Device.

35

Input Type

Assigned Natural Device and Description
Index

Generic

0

Presence

1

Brightness

2

Presence in darkness

3

Presence detector with activated internal twilight sensor

Twilight

4

Twilight sensor

Motion

5

Motion detector

Motion in darkness

6

Motion detector with activated internal
twilight sensor

Smoke

7

Smoke Detector

Presence detector

Wind strength above limit 8

Wind monitor with user-adjusted wind
strength threshold

Rain

9

Rain monitor

Sun radiation

10

Sun light above threshold

Temperature below limit

11

Room thermostat with used-adjusted
temperature threshold

Battery status is low

12

electric battery is running out of power

Window is open

13

Window contact

Door is open

14

Door contact

Window is tilted

15

Window handle; window is tilted instead of fully opened

Garage door is open

16

Garage door contact

Sun protection

17

Protect against too much sun light

Frost

18

Frost detector

Heating system enabled

19

Heating system activated

Change-over signal

20

Change-over signal between warm
water (active) or cold water (inactive)

Initialization

21

On power-up or startup not all functions may be ready (yet)

Malfunction

22

Connected device is broken and requires maintenance. Operation may
have seized.

Service

23

Connected device requires maintenance. Normal operation still possible.
Table 20: Binary input types

Addionally each input line has an assigned target group which specifies which target function will be
triggered by input signals. Currently, for all binary input types except Malfunction and Serive, only the
Joker function is supported. For Malfunction and Service „Apartment Ventilation” can be an alternative
target.

36

Target Function

Assigned Index Notes

Joker

8

Apartment Ventilation 64

only Malfunction/Service
Table 21: Binary input target functions

11.3 System Behavior
The digitalSTROM system automatically generates a system level events upon reception of binary events
from Terminal Blocks. Depending on the current corresponding state, the input type and the target
group an appropriate event is generated. Further system actions can be implemented by system addons.
State Change

System Activity

Smoke detector active

Call fire alarm in apartment

Wind monitor active

Call wind alarm in apartment or cluster

Wind monitor inactive

Call no-wind activity

Rain monitor active

Call rain alarm in apartment or cluster

Rain monitor inactive

Call no-rain activity

Presence active

Set presence state in corresponding zone

Presence inactive

Clear presence state in corresponding zone

Motion active

Set motion state in corresponding zone

Motion inactive

Clear motion state in corresponding zone

Room thermostat active

Call On activity in heating group of the corresponding zone

Room thermostat inactive Call Off activity in heating group of the corresponding zone
Malfunction active/inactive Group status sensor malfunction bit updated
and pushed to group
Service active/inactive

Group status sensor service bit updated and
pushed to group
Table 22: Binary input activities

A state is cleared if all previously active inputs switched to inactive again. Logically the input signals
are OR’ed. For example the motion state in a zone is set to active when any motion detector in the same
zone triggers, but the state will be cleared only if all motion detectors in the same zone are inactive.
11.4 Input Processing
The input signal of a binary input line may be preprocessed by the digitalSTROM-Device. digitalSTROM
Terminal Blocks use an 8-Bit value BinaryInputMode that is stored in the device register LTMODE (see
??).

37

12

Sensor Values

Sensor measurements and values are supported on three different layers:
• device level measurements,
• zone level values,
• application specific values.
Device level measurements are signaled to the system by events from a device.
Zone level values are determined by the system or can be directly signaled by device. The latter is the
case for a temperature sensor that is statically configured to measure the room temperature only.
Application specific values are either sensor values that are only relevant for a single application, or
special values with status information.
Zone and application specific values are being broadcasted back to devices by the system.
Notice When sending sensor values downstream the data is reduced to a 10 bit value by reducing
the resolution and keeping the value range constant. This is done in general for compatibility.

12.1 Device Sensors
The following table defines sensor types used on device level in the digitalSTROM system.

38

Name

Unit

Sensor Type VDCAPI Id/Usage

Active Power

Watt (W)

4

14 / 4,5,6

Output Current

Ampere (mA)

5

15 / 4,5,6

Energy Meter

Watthours (kWh) 6

16 / 4,5,6

Room Temperature

Celsius (°C)

9

1/1

Outdoor Temperature

Celsius (°C)

10

1/2

Room Brightness

Lux (Lx)

11

3/1

Outdoor Brightness

Lux (Lx)

12

3/2

Room Relative Humidity

Percent (%)

13

2/1

Outdoor Relative Humidity

Percent (%)

14

2/2

Air pressure

Pascal (hPa)

15

16 / 2

Wind gust speed

m/s

16

23 / 2

Wind gust direction

degrees

17

24 / 2

Wind speed (average)

m/s

18

13 / 2

Wind direction

degrees

19

19 / 2

Precipitation intensity of last hour

mm/m2

20

21 / 2

Room Carbon Dioxide CO2 Concentration

ppm

21

22 / 1

Room Carbon Monoxide CO Concentration

ppm

22

5/1

Sound Pressure Level

dB

25

20 / 4,5,6

Room Temperature Set Point

Celsius (°C)

50

TBD

Room Temperature Control Variable

Percent (%)

51

TBD

Output Current (High Range)

Ampere (mA)

64

15 / 4,5,6

Apparent Power

Volt-Ampere (VA) 65

17 / 4,5,6

Temperature

Celsius (°C)

66

1 / 4,5,6

Brightness

Lux (Lx)

67

3 / 4,5,6

Relative Humidity

Percent (%)

68

2 / 4,5,6

Generated Active Power

Watt (W)

69

25 / 4,5,6

Generated Energy Meter

Watthours (kWh) 70

26 / 4,5,6

Water Quantity

Liter (l)

71

27 / 4,5,6

Water Flow Rate

Liter/Second (l/s) 72

28 / 4,5,6

Length

Meter (m)

73

29 / 4,5,6

Mass

Gram (g)

74

30 / 4,5,6

Time

Second (s)

75

31 / 4,5,6

Table 23: Sensor Types
12.2 Room Sensors
The following table defines sensor types used on room level in the digitalSTROM system.
Name

Unit

Sensor Type VDCAPI Id/Usage

Room Temperature

Celsius (°C) 9

1/1

Room Relative Humidity

Percent (%) 13

2/1

Room Brightness

Lux (Lx)

11

3/1

Room Carbon Dioxide CO2 Concentration

ppm

21

22 / 1

Room Carbon Monoxide CO Concentration

ppm

22

5/1

Room Temperature Set Point

Celsius (°C) 50

TBD

Table 24: Room Sensor Types
The following table defines outdoor sensor types used in the digitalSTROM system. These values are
broadcasted to every zone in the apartment.
39

Name

Unit

Sensor Type VDCAPI Id/Usage

Outdoor Temperature

Celsius (°C) 10

1/2

Outdoor Relative Humidity

Percent (%)

14

2/2

Outdoor Brightness

Lux (Lx)

12

3/2

Air pressure

Pascal (hPa) 15

16 / 2

Wind gust speed

m/s

16

23 / 2

Wind gust direction

degrees

17

24 / 2

Wind speed (average)

m/s

18

13 / 2

Wind direction

degrees

19

19 / 2

Precipitation intensity of last hour

mm/m2

20

21 / 2

Sun azimuth

degrees

76

TBD

Sun elevation

degrees

77

TBD

Table 25: Room Sensor Types
12.3 Application Status Sensors
12.3.1 Room Temperature Control
Name

Unit

Room Temperature Control Variable

Percent (%) 51

Sensor Type VDCAPI Id/Usage
TBD

Table 26: Room Temperature Control Sensor Types
12.3.2 Apartment Ventilation
Name

Unit

Sensor Type VDCAPI Id/Usage

Statussensor

see Table 28 60

TBD

Table 27: Apartment Ventilation Sensor Types

Bit

Status

Description

0

Reserved

1

Malfunction

The ventilation system stopped working correctly

2

Service

The ventilation system requires service

Table 28: Apartment Ventilation: Status Sensor Encoding
12.4 Powerline Specifics
Terminal Blocks can support up to a maximum of 15 sensor objects. The table of implemented sensor
objects per Terminal Block is defined per digitalSTROM-Device parameters (see C.2.8), and is read by
the dSM on first time registration.
Measurement values are sent upstream from digitalSTROM-Device’s as 12 bit normalized values.
Sensor types 0..63 can be sent downstream to digitalSTROM-Devices. There is a constraint on the
addressing that uses 6 bit numbers for the sensor type.
When sending downstream the data has to be reduced to a 10 bit value. The resolution is reduced and
compared to the 12 bit maximum the value range is kept constant (lowest two bits cut off)
Conversion table:

40

Name

Sensor Type Min 12 Bit Max

Resolution per Bit

Temperature

66

230 639,5

0,1 (=-43,15°C .. 366,35°C)

Relative humidity

68

0

102,375

0,025

Brightness

67

1

131446,795 logarithmic: lx = 10 800 , x =
800 ∗ log (lx)

Sound pressure level

25

0

255,938

Room Temperature

9

230 332,375

0,025 (=-43,15°C .. 59,225°C)

Room Relative humidity

13

0

102,375

0,025

Room Brightness

11

1

131446,795 logarithmic: lx = 10 800 , x =
800 ∗ log (lx)

Room Carbon Dioxide concentration CO2

21

1

131446,795 logarithmic:
ppm
=
x
10 800 , x = 800 ∗ log (ppm)

Room Carbon Monoxide concentration CO

22

1

131446,795 logarithmic:
ppm
=
x
10 800 , x = 800 ∗ log (ppm)

Room Temperature Set-Point

50

230 332,375

0,025

Room Temperature Control Variable

51

0

0,025

Outdoor Temperature

10

230 332,375

0,025 (=-43,15°C .. 59,225°C)

Outdoor Relative humidity

14

0

102,375

0,025

Outdoor Brightness

12

1

131446,795 logarithmic: lx = 10 800 , x =
800 ∗ log (lx)

Air Pressure

15

200 1223,75

0,25

Wind Gust Speed

16

0

102,375

0,025

Wind Gust Direction

17

0

511,875

0,5
4

Wind Speed (average)

18

0

102,375

0,025

Wind Direction

19

0

511,875

0,5
4

Precipitation Intensity of last hour

20

0

102,375

0,025

Sun azimuth

76

0

180

0,25 (=-90° .. 90°)

Sun elevation

77

0

359,75

0,25

Active Power

4

0

4095

1

Apparent Power

65

0

4095

1

Output Current

5

0

4095

1

Output Current (High Range)

64

0

16380

4

Electric Meter

6

0

40,95

0,01

Length

73

0

40,95

0,01

Mass

74

0

4095

1

Duration

75

0

40,95

0,01

x

0,25
4

x

102,375

x

Table 29: Sensor Types

41

13

Glossary

13.1 digitalSTROM-Device
A digitalSTROM-Device is an device with well defined system behavior and with digitalSTROM communication capabilities. The digitalSTROM-Device is from the users point of view the complete piece
of equipment, including all visible output, sensor and input functions. This definition includes that a
digitalSTROM-Device may be build out of multiple Terminal Blocks.
13.2 digitalSTROM-Ready-Device
A digitalSTROM-Ready-Device is a device which complies to all rules of the digitalSTROM concept.
13.3 dSUID - dS Unique Identifier
The dSUID is a 136 bit unique id uses a format that is based on Universal Unique Identifiers (RFC 4122).
The dSUID was introduced for such cases where a GTIN and/or serial number is unknown or not available for a component or product, or where multiple components are build upon the same basis Id.
The dSUID has to be generated according to the following prioritized rules. The preferred methods
allow to regenerate the dSUID and thus always recreate the same key. For the last-choice RandomdSUID it is an important requirement that the dSUID does not change over the lifetime. Modules that
generate such a random dSUID have to store it persistently.
1. SGTIN-96 is available for a device
→ Use this SGTIN-96

2. A GTIN and serial number of device
→ Combine GTIN and serial number to form a SGTIN-128 with Application Identifier 21: “(01)<GTIN>(21)<ser
number>” and use the resulting string to generate a UUIDv5 in the GS1-128 name space
3. An existing UUID of a device is available
→ Use the existing UUID
4. Another unique ID of the device is available within the kind of the device
→ Generate name based UUIDv5 with unique ID in the relevant name space; pre-defined name
spaces are existing, e.g. for EnOcean, IEEE MAC
5. Nothing from the above
→ Only a locally unique ID can be generated, generate a random UUIDv4
13.4 dSID - SGTIN-96
The dSID is a 96 bit unique identifier and follows the SGTIN-96 (Serialized Global Trade Item Number)
format defined by the GS1 standard organization.
It consists of these concatenated bit fields:
• 8-bit Header: fixed value (always 0x30)
• 3-bit Filter Value
• 3-bit Partition Value: indicates length of company prefix
• 20…40-bit Company Prefix
• 4…24-bit Item Reference
• 38-bit Serial Number

42

Type

Filter Value

All Others

0

Point of Sale (POS) Trade Item

1

Full Case for Transport

2

Reserved

3

Inner Pack Trade Item Grouping for Handling

4

Reserved

5

Unit Load

6

Unit inside Trade Item or component inside a product not intended for individual sale 7
Table 30: Filter Value

Partition Value (P)

GS1 Company Prefix

Indicator/Pad Digit and Item Reference

SGTIN-96 bits SGTIN-128 digits SGTIN-96 bits SGTIN-128 digits
0

40

12

4

1

1

37

11

7

2

2

34

10

10

3

3

30

9

14

4

4

27

8

17

5

5

24

7

20

6

6

20

6

24

7

Table 31: Partition Value
Since the SGTIN-96 forces to have the ”partition value”, which defines the variable length of the company
prefix, a SGTIN-128 cannot be converted into a SGTIN-96, because it doesn’t include this information.
13.5 SGTIN-128
The SGTIN-128 (Serialized Global Trade Item Number) format is defined by the GS1 standard organization. The SGTIN-128 is a two part data object that consists of two application identifier and the related
data, represented by e.g. the text string “(01)<GTIN>(21)<serial number>”.
13.6 GID-96
GID-96 is the legacy format of the dSID. The structure of the GID-96 Global Identifier standard was
defined by EPCGlobal Inc.
To keep compatibility with existing systems the legacy format of a dSID is furthermore supported. The
SGTIN and GID-96 have a unique header prefixes and therefore can be used in parallel without overlap.
The legacy dSID number is automatically generated for digitalSTROM-Devices with firmware revision
prior to 3.5.5.
The GID-96 number consist of 4 parts:
8 Bit Header: fixed value, 0x35
28 Bit Manager Number: EPCGlobal uniquely assigned number, 0x04175FE
24 Bit Object Class: digitalSTROM defined system objects
36 Bit Serial Number: digitalSTROM product serial number
The following Object Class values are defined by digitalSTROM:

43

Value

Object Class

0

digitalSTROM Device

1

digitalSTROM Meter

2 .. 0xFEFFFF

Reserved

0xFF0000 .. 0xFFFFFF Devices with Ethernet MAC Address
Table 32: dSID Object Class
Devices with Ethernet interface can be mapped into the aizo dSID address space. For example the
digitalSTROM Server is uniquely identified by a generated dSID using its Ethernet MAC Address. For
example the MAC Address 12:34:56:78:90:AB is translated to the dSID ”3504175FEFF12340567890AB”.
13.7 Function-ID
The Function-ID is a 16 bit device configuration value that describes basic capabilities of digitalSTROM
devices. This value contains the standard group of a device, basic information about the functionality
and the encoding of upstream data messages.
The standard group of a digitalSTROM-Device corresponds to its default color group.
13.8 Vendor-ID
The Vendor-ID is 16 bit device configuration value that describes the vendor company of the digitalSTROM device. The following Vendor-ID’s are defined:
Value Vendor-ID
1

digitalStrom GmbH, Germany

2

digitalStrom AG, Switzerland

3

ONE Smart Control, Belgium
Table 33: Vendor ID

13.9 Product-ID
The Product-ID is a 16 bit device configuration value describing the product family and hardware platform.
The Vendor-ID, Product-ID and standard color group together are inputs for looking up the GTIN and
Product Code.
The Product-Code is used by the digitalSTROM-Server and Server User Interface (Configurator) to decode product capabilities.
13.10

GTIN

Global Trade Item Number (GTIN) is a format to uniquely identify trade items following the standards
defined by the GS.1 organization.
The GTIN consists of a company prefix number and an item reference number. The length of each of
these numbers differs depending on how many items a company needs to code into a GTIN. A smaller
company prefix, which provides more space for item numbers, will be more expensive than a larger
company prefix with space for less items.
As digitalSTROM-Devices do not have their full GTIN stored on the device, this number is generated by
the digitalSTROM-Server using lookup tables like ??.

44

The digitalSTROM-Meter has its GTIN stored in the configuration area of the device, and a digitalSTROMServer has a GTIN as well.
Product Code

GTIN

Standard Color Product-ID Vendor-ID

GE-KM200

4290046000010 1

0x00C8

1

GE-TKM210

4290046000027 1

0x04D2

1

GE-SDM200

4290046000034 1

0x08C8

1

GE-SDS200-CW

7640156790221 1

0x18C8

2

GE-SDS200-CS

7640156790238 1

0x18C9

2

GE-SDS220-CT

7640156790214 1

0x18DC

2

GE-TKM220

4290046000201 1

0x04DC

1

GE-TKM230

4290046000218 1

0x04E6

1

GE-KL200

4290046000195 1

0x0CC8

1

GN-KM200

4290046000041 7

0x00C8

1

GN-TKM200

4290046000065 7

0x04C8

1

GN-TKM210

4290046000058 7

0x04D2

1

GR-TKM200

4290046000638 2

0x04C8

1

GR-TKM210

4290046000645 2

0x04D2

1

GR-KL200

4290046000607 2

0x0CC8

1

GR-KL210

4290046000614 2

0x0CD2

1

GR-KL220

4290046000621 2

0x0CDC

1

RT-TKM200

4290046000072 6

0x04C8

1

RT-SDM200

4290046000089 6

0x08C8

1

SW-TKM200

4290046000904 8

0x04C8

1

SW-TKM210

4290046000911 8

0x04D2

1

SW-AKM200

7640156790405 8

0x20C8

2

SW-AKM210

7640156790412 8

0x20D2

2

SW-AKM220

7640156790429 8

0x20DC

2

SW-KL200

4290046000959 8

0x0CC8

1

SW-ZWS200-J

4290046000935 8

0x14C8

1

SW-ZWS200-F

4290046000942 8

0x14C9

1

SW-ZWS200-E+F 7640156790481 8

0x14CA

2

SW-SDS200-CW 7640156790221 8

0x18C8

2

SW-SDS200-CS

7640156790238 8

0x18C9

2

SW-SDS220-CT

7640156790214 8

0x18DC

2

Table 34: aizo Product Codes and GTIN’s

45

14

Certification Rules

Rule 1 A digitalSTROM-Ready-Device has to be preconfigured in the right application group. This is
essential to ensure that all devices in one application group can be orchestrated together.
Rule 2 Each submodule of a digitalSTROM-Ready-Device must be configured for exactly one digitalSTROM application group. digitalSTROM-Ready-Device have the application type statically configured
to allow for Plug&Play and automatic registration processes..
Rule 3 The function of a devices output is the basis of its group membership. For devices without output
function the target function of the switch button decides about the group membership.
Rule 4 digitalSTROM-Devices have to implement a default behavior for all 128 scene commands. The
system behavior and default values are defined in the particular documents for each functional group.
Rule 5 When applications send a scene command to a set of digitalSTROM-Devices with more than
one target device they have to use scene calls directed to a group, splitting into multiple calls to single
devices has to be avoided due to latency and statemachine consistency issues.
Rule 6 digitalSTROM-Ready-Devices must ignore stepping commands if their output value is zero.
Rule 7 digitalSTROM-Device have to complete the identification action on the command Programming
Mode Start within 4 seconds.
Rule 8 Application processes that do automatic cyclic reads or writes of device parameters are subject
to a request limit: at maximum one request per minute and circuit is allowed.
Rule 9 Application processes that do automatic cyclic reads of measured values are subject to a request
limit: at maximum one request per minute and circuit is allowed.
Rule 10 The action command ”Set Output Value” must not be used for other than device configuration
purposes.
Rule 11 digitalSTROM-Ready-Devices must not send upstream events continuously and must stop sending Low-Level-Event data even if the event is still or repeatedly valid. Transmission of pushbutton
events must be abandoned after a maximum time of 2.5 minutes. Automatically generated events must
not exceed a rate limit of 10 events per 5 minutes.
Rule 12 Applications shall use the digitalSTROM-Server webservice interface for communication with
the digitalSTROM system. Directly interfacing the dSM-API shall be avoided because it is an internal
interface and its API may change in the future.
Rule 13 Applications that automatically generate Call Scene action commands (see 6.1.1) must not execute the action commands at a rate faster than one request per second.

46

A

Structure Reference

A.1

Circuit

The maximum supported cable length on one circuit is limited to 50 meters. The maximum number of
digitalSTROM components connected on the RS485 line is 63.
A.2

Zone

The maximum number of zones per digitalSTROM-Meter is limited to 15.
A.3

Cluster

The maximum number of clusters per apartment is limited to 24.
A.4

Device

The maximum number of devices per digitalSTROM-Meter is limited to 128.

47

B

Scene Command Reference

Scene command indices not mentioned here are reserved and must not be used.
B.1 Presets
Activity Scene Command Description
Preset 0 0

Set output value to Preset 0 (Default: Off)

Preset 1 5

Set output value to Preset 1 (Default: On)

Preset 2 17

Set output value to Preset 2

Preset 3 18

Set output value to Preset 3

Preset 4 19

Set output value to Preset 4
Table 35: Preset 0…4

Activity

Scene Command Description

Preset 10 32

Set output value to Preset 10 (Default: Off)

Preset 11 33

Set output value to Preset 11 (Default: On)

Preset 12 20

Set output value to Preset 12

Preset 13 21

Set output value to Preset 13

Preset 14 22

Set output value to Preset 14
Table 36: Preset 10…14

Activity

Scene Command Description

Preset 20 34

Set output value to Preset 20 (Default: Off)

Preset 21 35

Set output value to Preset 21 (Default: On)

Preset 22 23

Set output value to Preset 22

Preset 23 24

Set output value to Preset 23

Preset 24 25

Set output value to Preset 24
Table 37: Preset 20…24

Activity

Scene Command Description

Preset 30 36

Set output value to Preset 30 (Default: Off)

Preset 31 37

Set output value to Preset 31 (Default: On)

Preset 32 26

Set output value to Preset 32

Preset 33 27

Set output value to Preset 33

Preset 34 28

Set output value to Preset 34
Table 38: Preset 30…34

48

Activity

Scene Command Description

Preset 40 38

Set output value to Preset 40 (Default: Off)

Preset 41 39

Set output value to Preset 41 (Default: On)

Preset 42 29

Set output value to Preset 42

Preset 43 30

Set output value to Preset 43

Preset 44 31

Set output value to Preset 44
Table 39: Preset 40…44

B.2 Stepping
Activity

Scene Command Description

Decrement 11

Decrement output value

Increment 12

Increment output value
Table 40: Stepping scenes

B.3 Area scenes
Activity

Scene Command Description

Area 1 Off

1

Set output value to Preset Area 1 Off (Default: Off)

Area 1 On

6

Set output value to Preset Area 1 On (Default: On)

Area 1 Decrement

42

Initial command to decrement output value

Area 1 Increment

43

Initial command to increment output value

Area 1 Stop

52

Stop output value change at current position

Area Stepping Continue 10

Next step to increment or decrement
Table 41: Area 1

Activity

Scene Command Description

Area 2 Off

2

Set output value to Area 2 Off (Default: Off)

Area 2 On

7

Set output value to Area 2 On (Default: On)

Area 2 Decrement

44

Initial command to decrement output value

Area 2 Increment

45

Initial command to increment output value

Area 2 Stop

53

Stop output value change at current position

Area Stepping Continue 10

Next step to increment or decrement
Table 42: Area 2

49

Activity

Scene Command Description

Area 3 Off

3

Set output value to Area 3 Off (Default: Off)

Area 3 On

8

Set output value to Area 3 On (Default: On)

Area 3 Decrement

46

Initial command to decrement output value

Area 3 Increment

47

Initial command to increment output value

Area 3 Stop

54

Stop output value change at current position

Area Stepping Continue 10

Next step to increment or decrement
Table 43: Area 3

Activity

Scene Command Description

Area 4 Off

4

Set output value to Area 4 Off (Default: Off)

Area 4 On

9

Set output value to Area 4 On (Default: On)

Area 4 Decrement

48

Initial command to decrement output value

Area 4 Increment

49

Initial command to increment output value

Area 4 Stop

55

Stop output value change at current position

Area Stepping Continue 10

Next step to increment or decrement
Table 44: Area 4

B.4 Local pushbutton
Activity

Scene Command Description

DeviceOn

51

Local on

DeviceOff

50

Local off

DeviceStop 15

Stop output value change at current position
Table 45: Device scenes

B.5 Special scenes
Activity

Scene Command Description

Minimum

13

Minimum output value

Maximum

14

Maximum output value

Stop

15

Stop output value change at current position

Auto-Off

40

Slowly fade down to off value

Impulse

41

Short impulse on the output

Sun Protection 56

Protect
Table 46: Special scenes

50

B.6 Temperature control scenes
Activity

Scene Command Description

Heating Off

0

Heating Comfort

1

Heating Economy

2

Heating Not Used

3

Heating Night

4

Heating Holiday

5

Passive Cooling Active

6

Passive Cooling Inactive 7
Cooling Off

9

Cooling Comfort

10

Cooling Economy

11

Cooling Not Used

12

Cooling Night

13

Cooling Holiday

14
Table 47: Temperature control scenes

Activity

Scene Command Description

Power On

29

Turn on and power up climate device

Power Off

30

Turn off and power down climate device

Valve Protection

31

Execute valve protection cycle

Force Valve Open 32
Force Valve Close 33
Force Fan Mode

40

Force Dry Mode

41

Automatic Mode

42
Table 48: Temperature device control scenes

B.7 Ventilation control scenes
Ventilation and recirculation applications follow a common approach that basic scenes have air flow
output values in increasing order, thus they are called Stages.

51

Activity

Scene Command Description

Off

0

off

Stage 1

5

level 1, 25%

Stage 2

17

level 2, 50%

Stage 3

18

level 3, 75%

Stage 4

19

level 4, 100%

Boost

6

time limited highest level

Noise Reduction

7

calm mode

Automatic air flow

8

automatic air flow intensity

Auto louver position 9

automatic louver position, swing mode
Table 49: Ventilation control scenes

Activity

Scene Command Description

Stage 1/0 32

off

Stage 1/1 33

level 1, 25%

Stage 1/2 20

level 2, 50%

Stage 1/3 21

level 3, 75%

Stage 1/4 22

level 4, 100%

Stage 2/0 34

off

Stage 2/1 35

level 1, 25%

Stage 2/2 23

level 2, 50%

Stage 2/3 24

level 3, 75%

Stage 2/4 25

level 4, 100%

Stage 3/0 36

Supply air off

Stage 3/1 37

Supply air level 1

Stage 3/2 26

Supply air level 2

Stage 3/3 27

Supply air level 3

Stage 3/4 28

Supply air level 4

Stage 4/0 38

Exhaust air off

Stage 4/1 39

Exhaust air level 1

Stage 4/2 29

Exhaust air level 2

Stage 4/3 30

Exhaust air level 3

Stage 4/4 31

Exhaust air level 4
Table 50: Ventilation control extended scenes

52

B.8 Group independent scenes
Activity

Scene Command

Deep Off

68

Standby

67

Zone Active

75

Auto Standby 64
Absent

72

Present

71

Sleeping

69

Wakeup

70

Door Bell

73

Panic

65

Fire

76

Alarm-1

74

Alarm-2

83

Alarm-3

84

Alarm-4

85

Wind

86

No-Wind

87

Rain

88

No-Rain

89

Hail

90

No-Hail

91

Pollution

92

Burglary

93

Table 51: Group independent activities and scene command values
NOTE: Hail/No-Hail scenes must be invoked with ”Forced” flag

53

C

Device Parameters

digitalSTROM-Devices have configuration parameters of different categories. The system relevant parameters described below are mandatory for digitalSTROM-Ready-Devices.
C.1

Class 0 - Communication Specific Parameters

C.1.1 Local Programming Mode
Offset 0x08, Length 8 Bit - PROGEN: Enable Local Programming Mode
This parameter controls the local programming mode functions of a digitalSTROM-Device.
Value Description
0

local programming mode disabled

1

only short-long allowed

2

only short-short-long allowed

3

both short-long and short-short-long allowed

C.2

Class 1 - digitalSTROM-Device Specific Parameters

Parameters in this class are read-only and are not allowed to be modified by user operations.
C.2.1 Firmware Version
Offset 0x00, Length 16 bit - VER: Firmware Version
This is the firmware version of the digitalSTROM-Device. 0x0321 reads as 3.2.1.
C.2.2 Serial Numer
Offset 0x02, Length 32 bit - DSID: digitalSTROM-ID
This parameter contains the serial number, the lower 32 bits of the unique 96-bit dSID ??.
C.2.3 Function ID
Offset 0x06, Length 16 bit - FID: Function-ID
The Function ID defines the basic capabilities of the digitalSTROM-Device.
C.2.4 Vendor ID
Offset 0x08, Length 16 bit - VID: Vendor-ID
Here the Vendor ID is defined.
C.2.5 Product ID
Offset 0x0a, Length 16 bit - PID: Product-ID
Here the Product ID is defined.
C.2.6 Structure and adressing
Offset 0x0c, Length 16 bit - ADDR: Short Address
The dynamic device short address assigned by the digitalSTROM-Meter during device registration process E.
Offset 0x0e, Length 16 bit - VC: Virtual Circuit
The bit field indicating the zone membership of a device.
Offset 0x10, Length 64 bit - GRP: Group Mask
The bit field indicating the group membership of a device.
54

C.2.7 OEM/GTIN
Offset 0x1c, Length 16 bit - OEM_SERIAL: OEM Serial Number
Device manufacturers may store a serial number of their bundled Native Device in the OEM_SERIAL
register.
Offset 0x1e, Length 8 bit - OEM_PARTNO: OEM Part Number
Device manufacturers may store a part number if a complex digitalSTROM-Device is built of more than
one Terminal Block.
C.2.8 Sensor Equipment
Offset 0x20, Length variable - ST: Sensor Table
A table containing an entry for each available sensor in the device.

3

lli
0

Polling Default polling interval
Value Description
0

disabled

1

60 seconds

2

5 minutes

3

30 minutes

4

1 hour

5

6 hours

6

12 hours

7

24 hours

Context Zone or global context
Conversion 12 to 10 bit conversion, either high or low bits important
Type Sensor Type (see 12.1)

C.2.9 Binary Input Equipment
Offset 0x40, Length variable - BIT: Binary Input Table
A table containing an entry for each available binary input in the device.

55

xt

4

Po
2

te
Co
n

5

Co

Re
s

nv
e

er
ve

e
Ty
p

8 7

ng

15

rs

d

io
n

Register C.1: Sensor Table Entry

20 19

e
Ty
p

nt
ry

pu
t

st
E
17

In

16

15

8

Ta
rg
et
G

ro
u

p

23

La

In
p

ut

Re
se
r

M

ve

d

od
e

Register C.2: Binary Input Table Entry

7

0

Target Group Id of the target functional
Input Type Binary input type, see table 20
Last Entry 0 = more entries to follow, 1 = this is the last input entry
Input Mode Input mode Id

C.3

Class 3 - Function Specific Parameters

C.3.1 Output Mode
Offset 0x00, 8 bit - MODE: Output Mode
This parameter describes, how the output is used, e.g. as dimmer or switch. This parameter is
digitalSTROM-Device and product specific, depending on the hardware equipment only selected values are supported by a device.
Output Mode Description
0

No output or output disabled

16

Switched

17

RMS (root mean square) dimmer

18

RMS dimmer with characteristic curve

19

Phase control dimmer

20

Phase control dimmer with characteristic curve

21

Reverse phase control dimmer

22

Reverse phase control dimmer with characteristic curve

23

PWM (pulse width modulation)

24

PWM with characteristic curve

33

Positioning control

39

Relay with switched mode scene table configuration

40

Relay with wiped mode scene table configuration

41

Relay with saving mode scene table configuration

42

Positioning control for uncalibrated shutter

Table 52: Output Mode Register
C.3.2 Pushbutton Configuration
Offset 0x01, 8 bit - LTNUMGRP0: Pushbutton Configuration
This parameter controls the function of the pushbutton input. The parameter is divided into 2 parts:
The lower 4 bit define the function and the upper 4 bit define the target group. For target group Joker
special functions are available and the bush button can be operated as the corresponding panic, leave
home or door bell Terminal Blocks.

56

Higher 4 bit Target group
0

Reserved

1

Light

2

Blinds

3

Climate

4

Audio

5

Video

6

Reserved

7

Reserved

8

Joker

9 -15

Reserved

Table 53: Button Input Groups

Lower 4 bit Description
0

local pushbutton (local + presets 2-4)

1

area 1 pushbutton (area 1 + presets 2-4)

2

area 2 pushbutton (area 2 + presets 2-4)

3

area 3 pushbutton (area 3 + presets 2-4)

4

area 4 pushbutton (area 4 + presets 2-4)

5

room pushbutton (presets 0-4)

6

extended 1 pushbutton (presets 10-14)

7

extended 2 pushbutton (presets 20-24)

8

extended 3 pushbutton (presets 30-34)

9

extended 4 pushbutton (presets 40-44)

10

extended area 1 pushbutton (area 1 + presets 12-14)

11

extended area 2 pushbutton (area 2 + presets 22-24)

12

extended area 3 pushbutton (area 3 + presets 32-34)

13

extended area 4 pushbutton (area 4 + presets 42-44)

14

apartment pushbutton

15

app pushbutton

Table 54: Button Input Id’s - Group 1 .. 7

Lower 4 bit Description
0

reserved

1

alarm

2

panic

3

leave/come Home

4

reserved

5

door bell

6 .. 14

reserved

15

app pushbutton

Table 55: Button Input Id’s - Group Joker
C.3.3 Dimm Time
Offset 0x06, 8 bit - DIMTIME0_UP: Dimm Time 0 Up
This transition time is used when dimming up. The formula for time calculation is:
exp
T = (100ms · 2exp ) − (100ms·2 32)·(15−lin) whereas exp = Bit 7..4 and lin = Bit 3..0.
57

Examples: 0x0F = 100ms, 0x1F=200ms, 0x27 = 300ms, 0x2F = 400ms, 0x37 = 600ms.
Offset 0x07, 8 bit - DIMTIME0_DOWN: Dimm Time 0 Down
This transition time is used when dimming down. See DIMTIME0_UP for time calculation.
Offset 0x08, 8 bit - DIMTIME1_UP: Dimm Time 1 Up
This transition time is used when dimming down. See DIMTIME0_UP for time calculation.
Offset 0x09, 8 bit - DIMTIME1_DOWN: Dimm Time 1 Down
This transition time is used when dimming down. See DIMTIME0_UP for time calculation.
Offset 0x0a, 8 bit - DIMTIME2_UP: Dimm Time 2 Up
This transition time is used when dimming down. See DIMTIME0_UP for time calculation.
Offset 0x0b, 8 bit - DIMTIME2_DOWN: Dimm Time 2 Down
This transition time is used when dimming down. See DIMTIME0_UP for time calculation.
C.3.4 Flashing Mode
Offset 0x0e, 8 bit - FOFFVAL0: Off Value for Programming Mode Flashing
The digitalSTROM-Device flashes when entering or exiting the programming mode. The flashing starts
at the current output value, then there are FCOUNT0 flash cycles. Each cycle transitions to FONVAL0,
then to FOFFVAL0. After the last cycle, the initial output value is restored.
Offset 0x0f, 8 bit - FONVAL0: On Value for Programming Mode Flashing
This is the on value for the flashing cycles. See FOFFVAL0.
Offset 0x10, 8 bit - FOFFTIME0: Off Time for Programming Mode Flashing
The off value while flashing is held for this time. See OFFVAL0. Each step means 33ms. Example: 20 =
660ms.
Offset 0x11, 8 bit - FONTIME0: On Time for Programming Mode Flashing
The on value while flashing is held for this time. See OFFVAL0. Each step means 33ms. Example: 20 =
660ms.
Offset 0x12, 8 bit - FCOUNT0: Flash Cycle Count for Programming Mode Flashing
See OFFVAL0. 0 disables flashing, 255 flashes infinitely.
Offset 0x13, 8 bit - FOFFVAL1: Off Value for Scene Flag Flashing
The digitalSTROM-Device flashes when a scene is called and the corresponding bit is set in scene configuration. The flashing starts at the current output value, then there are FCOUNT1 flash cycles. Each
cycle transitions to FONVAL1, then to FOFFVAL1. After the last cycle, the initial output value is restored
(if DC bit is set in scene configuration) or a transition to the called scene value takes place.
Offset 0x14, 8 bit - FONVAL1: On Value for Scene Flag Flashing
This is the on value for the flashing cycles. See FOFFVAL1.
Offset 0x15, 8 bit - FOFFTIME1: Off Time for Scene Flag Flashing
The off value while flashing is held for this time. See OFFVAL1. Each step means 33ms. Example: 20 =
660ms.
Offset 0x16, 8 bit - FONTIME1: On Time for Scene Flag Flashing
The on value while flashing is held for this time. See OFFVAL1. Each step means 33ms. Example: 20 =
660ms.

58

Offset 0x17, 8 bit - FCOUNT1: Flash Cycle Count for Scene Flag Flashing
See OFFVAL1. 0 disables flashing, 255 flashes infinitly.
C.3.5 LED Configuration
Offset 0x18, 8 bit - LEDCON0: LED Configuration 0

6

5

4

DC
S

DD
M

7

DF
M

Re
se

rv
e

GR

PC

d

Register C.3: LED Configuration

3 2

0

GRPC: LED Color Mode Normally the LED shows automatically the color for the user selected group (e.g. using short-short-long). But it is also possible to overwrite this color
for some scenes using the scene configuration flags and this register with GRPC=0.
GRPC Description
0

use DCS register for specific color

1

automatic color for user programmed group

Reserved Should always be 0.
DDM: LED Brightness Select how the LED brightness is controlled. This flag is only used if
GRPC is set to 1.
DDM Description
0

full brightness

1

brightness depends on output value (higher value = brighter)

DFM: LED Flash Mode Select when the LED flashes.
DFM Description
00

always on, flash during transition

01

always on, flash when output on

10

always on

11

always flashing

DCS: Direct Color Selection Directly select a specific color.
DCS Description
0 0 0 use LEDRGB0..1 registers
0 0 1 blue
0 1 0 green
0 1 1 cyan
1 0 0 red
1 0 1 magenta
1 1 0 yellow
1 1 1 white

Offset 0x19, 8 bit - LEDCON1: LED Configuration 1
See LEDCON0.
Offset 0x1a, 8 bit - LEDCON1: LED Configuration 2
See LEDCON0.

59

Offset 0x1b, 8 bit - LEDRGB0: LED RGB Register 0
Offset 0x1c, 8 bit - LEDRGB1: LED RGB Register 1

15

G

R

B

Register C.4: LED RGB Register

11 10

6 5

15

0

8 7

0

LEDRGB1

LEDRGB0

R: LED Brightness Red 5 bit LED brightness for color red
B: LED Brightness Blue 5 bit LED brightness for color blue
G: LED Brightness Green 6 bit LED brightness for color green

C.3.6 Local Pushbutton
Offset 0x1d, 8 bit - LTCON: Local Pushbutton Configuration

6

np
ut

np
ut

d
ve
er

TI

7

EX
TI

Lo

Re
s

ca

lM

od

e

is

lo
c

al

pu
sh

bu
tto

n

Register C.5: LTCON

1

0

2

Local Mode Push button events only local
EXT-Input EXT-Input is local push button
T-Input T-Input is local push button

Offset 0x1e, 8 bit - LTMODE: Local Pushbutton Mode

60

Value Description
0

Standard button

1

Turbo button: limited operation, hold, click and programming click disabled

2 .. 4

Reserved

5

2-way up, paired with input 1

6

2-way up, paired with input 2

7

2-way up, paired with input 3

8

2-way up, paired with input 4

9

2-way down, paired with input 1

10

2-way down, paired with input 2

11

2-way down, paired with input 3

12

2-way down, paired with input 4

13

2-way up/down

14 ..15 Reserved
16

Standard binary input

17

Inverted binary input

18

Binary input, rising edge 1

19

Binary input, falling edge 1

20

Binary input, rising edge 0

21

Binary input, falling edge 0

22

Binary input, toggle mode on rising edge

23

Binary input, toggle mode on falling edge

C.3.7 Configuration Flags
Offset 0x1f, 8 bit - DEVICECFG: Device Configuration Flags

Re
se

rv

Pr
ot
ec

ed

tC

on
fig

ur
at
io

n

Register C.6: DEVICECFG

7

1

0

Protect Configuration Device configuration is locked

C.3.8 OEM/GTIN
Offset 0x2a, 48 bit - GTIN: Global Trade Item Number
Device manufacturers store the GTIN of their bundled Native Device in the GTIN register. This register is
used by the digitalSTROM-Server to get extended device information like descriptive text, icons, website
and service URL’s (see 3.3).
C.4

Class 6 - Sensor Event Table

digitalSTROM-Devices may implement the sensor event table, see 8.2.4. This table can hold up to 16
entries. Each entry consists of 6 bytes. The first entry starts at offset 0x00, the second at offset 0x06,
the third at offset 0x0C and so on.

61

Each entry consists of:
• Sensor-ID to compare
• relational operator
• threshold value to compare with
• hysteresis
• action
If an entry matches the conditions, the action is executed. The action normally is: sending the event to
user level. But the digitalSTROM-Device could also request the digitalSTROM-Meter to poll the value of
the affected sensor. It is also possible to let the digitalSTROM-Device send a pushbutton event instead.
To disable a table entry, write all bytes to 0xff.

7

n
Ac
tio

Se

Re
l

ns
o

Op

r-

ID

Register C.7: Sensor Event Table Offset 0

4 3

2 1

0

Sensor-ID If the digitalSTROM-Device gets a new value from an internal sensor with this
Sensor-ID, it will be compared.
RelOp: Relational operator 0:=, 1:<, 2:>, 3=reserved
Action 0:send push-event with entry-number, 1:request polling of Sensor-ID value, 2:send
pushbutton event, 3:reserved

Th

re
s

ho
ld

Register C.8: Sensor Event Table Offset 1..3

12

Hy

st

er
es

is

23

11

0

Threshold (offset 1, bit 11..4 & offset 2, bit 3..0) The value to compare with
Hysteresis (offset 2, bit 11..8 & offset 3, bit 7..0) The hysteresis works like this:

• For the relational operator =:
– If the sensor value equals the threshold value to compare with, the action will be executed
– Additional events for this table entry will only be executed, if the sensor value drops below
threshold − hysteresis or rises above threshold + hysteresis
• For the relational operator <:
– If the sensor value is lower than the threshold value to compare with, the action will be
executed
62

– Additional events for this table entry will only be executed, if the sensor value rises above
threshold + hysteresis
• For the relational operator >:
– If the sensor value is higher than the threshold value to compare with, the action will be
executed
– Additional events for this table entry will only be executed, if the sensor drops below threshold−
hysteresis

co

re
s

er
v

nd
iti

ed

on

Register C.9: Sensor Event Table Offset 4

7

2 1

0

reserved reserved, write 0
condition 0:execute action always, 1:execute action only if outputvalue = 0, 2:execute action
only if outputvalue > 0, 3=execute action never

7

Cl

Ke
y

ic
k

Ty
p

e

N
um
be

r

Register C.10: Sensor Event Table Offset 5

4 3

0

Key Number only used if Action = 2. See 11.1.
Click Type only used if Action = 2. See 11.1.

C.5

Class 64 - Output status

C.5.1 Current output status
The actual device output value of the first output channel can be read back for configuration purposes
from offset 0.

63

D Device Scene Table
The scene table contains values and settings for 128 presets. Each entry consists of a value for each
output channel and configuration bits.
D.1

Scene Value

After a scene call a transition takes place from the current value to the new scene value. The output
transition depends on the scene configuration bits and the internal local priority state.
The bitlength of the scene value is not set to a fixed value.
D.2

Configuration Bits

There are 8 configuration bits for each scene.

O
DC

RI
LP

er

AS
4

re
s

6 5

FL

7

LC

DT

H

ve

d

Register D.1: Scene Configuration

3

2

1

0

DT: Dim Time Control the transition time between the current value and the new scene
value.
DT Description
0 0 use last dimtime
0 1 use dimtime from register DIMTIME0
1 0 use dimtime from register DIMTIME1
1 1 use dimtime from register DIMTIME2

LC: LED Configuration Control the behavior of the LED.
LC Description
0 0 use last LED configuration
0 1 use LED configuration from register LEDCON0
1 0 use LED configuration from register LEDCON1
1 1 use LED configuration from register LEDCON2

FLASH: Flash Configuration If this bit is set, the output flashes (as configured with FOFFVAL1,FONVAL1, FOFFTIME1, FONTIME1 and FCOUNT1). After flashing the output transistion takes place (if DC is not set and internal local priority state is not set or LPRIO is
set).
reserved Must not be modified and written back as read.
LPRIO: Ignore Local Priority If this bit is set, the output transition takes place even if the
internal local priority state is set. The new local priority state depends on the newly
called scene.
DC: Output Don’t Care Flag If this bit is set, the output value will not be changed. The output
transition will not take place.

64

E

Device Registration

A device needs to be registered at the digitalSTROM-Meter who also tracks the device availability state.
If a new device is connected to the circuit, the device sends its unique device ID (dSID) to the digitalSTROMMeter. The digitalSTROM-Meter then assigns a circuit-wide, unique short address to the device. If the
device was seen in the circuit before, it will get the same short address as before. At registration time
some parameters are synchronized with the digitalSTROM-Meter. The parameters to read depend on
the Function-ID which is read first. More parameters are: pushbutton configuration (room/area/...),
output mode (switchable or dimmable) and Product-ID.
If the digitalSTROM-Meter is powered on, there is no need to register all devices again. The digitalSTROMMeter sends its own unique ID to the devices and only devices which were not registered at this digitalSTROMMeter before will then request a registration.
The digitalSTROM-Meter detects if there are more than one devices which needs to be registered at
the same time. It will then switch to a slower registration mode which allows to register up to 128 new
devices at the same time.
The digitalSTROM-Meter checks the device availability every 24 hours. Each known device is contacted
by the digitalSTROM-Meter and if the device does not respond, the state will be set to inactive.

65

